# Docker 概述

Docker 是一个用于开发、运输和运行应用程序的开放平台。Docker 使您能够将应用程序与基础架构分开，以便您可以快速交付软件。使用 Docker，您可以像管理应用程序一样管理基础架构。通过利用 Docker 的方法来快速传送、测试和部署代码，您可以显着减少编写代码和在生产环境中运行代码之间的延迟。

## Docker 平台

Docker 提供了在称为容器的松散隔离环境中打包和运行应用程序的能力。隔离和安全性允许您在给定主机上同时运行多个容器。容器是轻量级的，包含运行应用程序所需的一切，因此您无需依赖主机上当前安装的内容。您可以在工作时轻松共享容器，并确保与您共享的每个人都获得以相同方式工作的相同容器。

Docker 提供工具和平台来管理容器的生命周期：

- 使用容器开发您的应用程序及其支持组件。
- 容器成为分发和测试应用程序的单元。
- 准备就绪后，将应用程序作为容器或编排服务部署到生产环境中。无论您的生产环境是本地数据中心、云提供商还是两者的混合体，这都是一样的。

## 我可以使用 Docker 做什么？

#### **快速、一致地交付您的应用程序**

Docker 允许开发人员使用提供应用程序和服务的本地容器在标准化环境中工作，从而简化了开发生命周期。容器非常适合持续集成和持续交付 (CI/CD) 工作流程。

考虑以下示例场景：

- 您的开发人员在本地编写代码并使用 Docker 容器与同事共享他们的工作。
- 他们使用 Docker 将他们的应用程序推送到测试环境中，并执行自动和手动测试。
- 当开发人员发现 bug 时，可以在开发环境中修复，重新部署到测试环境中进行测试验证。
- 测试完成后，向客户提供修复就像将更新后的映像推送到生产环境一样简单。

#### **响应式部署和扩展**

Docker 基于容器的平台允许高度可移植的工作负载。Docker 容器可以在开发人员的本地笔记本电脑、数据中心的物理机或虚拟机、云提供商或混合环境中运行。

Docker 的可移植性和轻量级特性还使动态管理工作负载、根据业务需求近乎实时地扩展或拆除应用程序和服务变得容易。

#### **在相同的硬件上运行更多的工作负载**

Docker 轻巧且快速。它为基于管理程序的虚拟机提供了一种可行且经济高效的替代方案，因此您可以使用更多的服务器容量来实现您的业务目标。Docker 非常适合高密度环境以及需要用更少的资源做更多事情的中小型部署。

## Docker 架构

Docker 使用客户端-服务器架构。Docker *客户端*与 Docker *守护进程*对话，后者负责构建、运行和分发 Docker 容器的繁重工作。Docker 客户端和守护进程可以 在同一系统上运行，或者您可以将 Docker 客户端连接到远程 Docker 守护进程。Docker 客户端和守护进程使用 REST API 通过 UNIX 套接字或网络接口进行通信。另一个 Docker 客户端是 Docker Compose，它允许您处理由一组容器组成的应用程序。

Docker 架构图
![Docker 架构图](https://docs.docker.com/assets/images/architecture.svg)

## Docker 守护进程 daemon

Docker 守护进程 ( `dockerd`) 侦听 Docker API 请求并管理 Docker 对象，例如图像、容器、网络和卷。守护进程还可以与其他守护进程通信以管理 Docker 服务。

## Docker 客户端 client

Docker 客户端 ( `docker`) 是许多 Docker 用户与 Docker 交互的主要方式。当您使用诸如 `docker run`之类的命令时 ，客户端会将这些命令发送到 `dockerd`，由后者执行。该 `docker` 命令使用 Docker API。Docker 客户端可以与多个守护进程通信。

## Docker 桌面 Desktop

Docker Desktop 是一个易于安装的应用程序，适用于您的 Mac、Windows 或 Linux 环境，使您能够构建和共享容器化应用程序和微服务。Docker Desktop 包括 Docker 守护程序 ( `dockerd`)、Docker 客户端 ( `docker`)、Docker Compose、Docker Content Trust、Kubernetes 和 Credential Helper。有关详细信息，请参阅 [Docker 桌面](https://docs.docker.com/desktop/)。

## Docker 注册表 registries

Docker 注册表存储 Docker 映像。Docker Hub 是一个任何人都可以使用的公共注册表，Docker 默认配置为在 Docker Hub 上查找图像。您甚至可以运行自己的私有注册表。

当您使用 `docker pull` 或 `docker run` 命令时，所需的图像将从您配置的注册表中提取。当您使用该 `docker push` 命令时，您的图像将被推送到您配置的注册表。

## Docker 对象 objects
当您使用 Docker 时，您正在创建和使用图像、容器、网络、卷、插件和其他对象。本节是对其中一些对象的简要概述。

### 图像Images
图像是一个只读模板，其中包含创建 Docker 容器的说明。通常，一个图像基于另一个图像，带有一些额外的定制。例如，您可以构建一个基于 `ubuntu` 图像的图像，但安装 Apache Web 服务器和您的应用程序，以及使您的应用程序运行所需的配置详细信息。

您可以创建自己的图像，也可以只使用其他人创建并在注册表中发布的图像。要构建您自己的映像，您可以使用简单的语法创建一个 *Dockerfile* ，用于定义创建和运行映像所需的步骤。Dockerfile 中的每条指令都会在镜像中创建一个层。当您更改 Dockerfile 并重建映像时，只会重建那些已更改的层。与其他虚拟化技术相比，这是使映像如此轻巧、小巧和快速的部分原因。

### 容器 Containers
容器是图像的可运行实例。您可以使用 Docker API 或 CLI 创建、启动、停止、移动或删除容器。您可以将一个容器连接到一个或多个网络，将存储附加到它，甚至可以根据其当前状态创建一个新图像。

默认情况下，容器与其他容器及其主机隔离得相对较好。您可以控制容器的网络、存储或其他底层子系统与其他容器或主机的隔离程度。

容器由其映像以及您在创建或启动它时提供给它的任何配置选项定义。当容器被移除时，任何未存储在持久存储中的状态更改都会消失。

#### 示例 `docker run` 命令
以下命令运行一个 `ubuntu` 容器，以交互方式附加到您的本地命令行会话，然后运行/bin/bash​​.

```
docker run -i -t ubuntu /bin/bash
```
当您运行此命令时，会发生以下情况（假设您使用的是默认注册表配置）：

1. 如果您在本地没有 `ubuntu` 图像，Docker 会从您配置的注册表中拉取它，就像您 `docker pull ubuntu` 手动运行一样。
2. Docker 创建一个新容器，就像您手动运行命令一样 `docker container create` 。
3. Docker 为容器分配一个读写文件系统，作为它的最后一层。这允许正在运行的容器在其本地文件系统中创建或修改文件和目录。
4. Docker 创建一个网络接口以将容器连接到默认网络，因为您没有指定任何网络选项。这包括为容器分配 IP 地址。默认情况下，容器可以使用主机的网络连接连接到外部网络。
5. Docker 启动容器并执行`/bin/bash`. 因为容器以交互方式运行并附加到您的终端（由于`-i` 和`-t` 标志），所以您可以使用键盘提供输入，同时将输出记录到您的终端。
6. 当您键入 `exit` 终止`/bin/bash` 命令时，容器会停止但不会被删除。您可以重新启动它或将其删除。

## 底层技术
Docker 是用 [Go 编程语言](https://golang.org/)编写的，并利用 Linux 内核的几个特性来提供其功能。Docker 使用一种称为*容器* `namespaces` 的技术来提供隔离的工作空间。当您运行容器时，Docker 会 为该容器创建一组*名称空间*。

这些命名空间提供了一层隔离。容器的每个方面都在单独的命名空间中运行，并且其访问仅限于该命名空间。

## 下一步
- 阅读有关[安装 Docker](https://docs.docker.com/get-docker/) 的信息。
- 通过 [Docker 入门教程](https://docs.docker.com/get-started/)获得实践经验 。
